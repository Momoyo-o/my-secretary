# LINE情報配信Bot

毎朝の準備時間を最適化するために開発した、パーソナライズ型情報配信システムです。
Google Apps Script (GAS) を基盤とし、複数のAPIとスクレイピング技術を統合しています。

## システム概要
毎朝、設定された時刻に LINE Messaging API を通じて、ユーザーの生活圏に特化した情報を一括配信します。
単なる情報の通知に留まらず、スプレッドシートによる管理機能や、AIを活用したトラブルシューティングを経て構築しました。

## 主要機能
* **スケジュール管理**: スプレッドシート上で配信のON/OFFや対象地域を柔軟に一括管理
* **定期実行・一括処理**: GASトリガーによる毎朝の自動実行と複数スケジュールの同時処理
* **パーソナライズ挨拶**: LINE Messaging APIを活用したユーザー表示名の自動取得とメッセージ挿入
* **インテリジェント・アラート**: 降水確率や気温の数値に基づいた「傘・防寒」の自動判定アドバイス
* **マルチカテゴリニュース**: ユーザーの関心（IT/ビジネス等）に合わせたRSSニュースの動的配信
* **鉄道運行情報のリアルタイム監視**: 指定路線の遅延・運休情報をYahoo!路線情報からスクレイピング取得
* **季節限定・モチベーション管理**: 2-5月限定の花粉情報配信および日替わりの名言配信機能

## 使用技術
- **Language**: Google Apps Script (JavaScript)
- **APIs**: LINE Messaging API, 気象庁API, Google News RSS
- **Database**: Google Sheets (マスタ管理・スケジュール管理)
- **Design Tools**: Notion (要件定義・設計書作成)

## システム設計のこだわり
### 1. 外部マスタ参照方式
路線情報や配信スケジュールをコード内に直接記述せず、スプレッドシートから動的に読み込む設計を採用しました。これにより、コードを触らずに配信内容のカスタマイズが可能な高い保守性を実現しています。

### 2. トラブルシューティング（AIとの共創）
外部サイトの仕様変更によるデータ取得エラー（403エラー）が発生した際、AIをデバッグパートナーとして活用しました。HTML生データの解析を共に行い、User-Agentの設定や正規表現の再定義を実装することで、迅速な復旧を達成しました。

## リポジトリ構成
- `main.js`: システム本体のソースコード（GAS）
- `design_doc.pdf`: 要件定義およびシステム設計書

## 免責事項
セキュリティ保護のため、アクセストークンおよびユーザーIDは環境変数（Script Properties）として管理し、ソースコード上では伏字としています。
